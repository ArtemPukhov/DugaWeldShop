# üì± –û—Ç–ª–∞–¥–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üîç –ü—Ä–æ–±–ª–µ–º–∞
–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, —Ö–æ—Ç—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
–ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–∫—Å–∏ API –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ MinIO.

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: ‚ùå http://141.105.71.70:9001/api/v1/buckets/... (CORS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)
–ö–æ–º–ø—å—é—Ç–µ—Ä—ã: ‚úÖ http://141.105.71.70:9001/api/v1/buckets/... (—Ä–∞–±–æ—Ç–∞–µ—Ç)
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–í—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: ‚úÖ /api/files/{filename} (–ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ –Ω–∞—à API)
```

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω imageUtils.ts
```typescript
// –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–∫—Å–∏ API
const baseUrl = process.env.NEXT_PUBLIC_API_BASE_URL || 
  (process.env.NODE_ENV === 'production' ? '' : 'http://localhost:8080');

return `${baseUrl}/api/files/${imageUrl}`;
```

### 2. –£–ª—É—á—à–µ–Ω FileController.java
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ Content-Type –∑–∞–≥–æ–ª–æ–≤–∫–∏
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (1 —á–∞—Å)
- ‚úÖ Inline –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- ‚úÖ –õ—É—á—à–µ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

### 3. –û–±–Ω–æ–≤–ª–µ–Ω SecurityConfig.java
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `/api/files/**` –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –ø—É—Ç–∏
- ‚úÖ CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## üîß –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
```typescript
import { debugImageUrl } from '@/lib/imageUtils';

const debug = debugImageUrl('image.jpg');
console.log(debug);
// –í—ã–≤–µ–¥–µ—Ç: { original: '...', processed: '...', isMobile: true, ... }
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
```typescript
import { checkImageAvailability } from '@/lib/imageUtils';

const result = await checkImageAvailability('/api/files/image.jpg');
console.log(result);
// –í—ã–≤–µ–¥–µ—Ç: { available: true, status: 200 } –∏–ª–∏ { available: false, error: '...' }
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø—Ä–æ–∫—Å–∏

### 1. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚úÖ –û–±—Ö–æ–¥–∏—Ç CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –¥–æ—Å—Ç—É–ø

### 2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞

### 3. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º:
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL**: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `/api/files/{filename}`, –Ω–µ –ø—Ä—è–º–æ–π MinIO URL
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS**: –Ω–∞—à API –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å**: —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω —Å –º–æ–±–∏–ª—å–Ω–æ–≥–æ

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:
1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 —á–∞—Å
2. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ
3. **CDN**: —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CDN

### –û—à–∏–±–∫–∏ 404:
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞**: –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º –≤ MinIO
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞

## üîç –û—Ç–ª–∞–¥–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```javascript
// –û—Ç–∫—Ä–æ–π—Ç–µ DevTools –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
fetch('/api/files/test-image.jpg')
  .then(response => console.log('Status:', response.status))
  .catch(error => console.error('Error:', error));
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ URL:
```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–∫–æ–π URL –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
import { debugImageUrl } from '@/lib/imageUtils';
console.log(debugImageUrl('test-image.jpg'));
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:
```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
import { checkImageAvailability } from '@/lib/imageUtils';
checkImageAvailability('/api/files/test-image.jpg')
  .then(result => console.log('Available:', result));
```

## üì± –ú–æ–±–∏–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞

### User-Agent –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:
```typescript
const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
```

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
```css
/* –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ */
@media (max-width: 768px) {
  .category-image {
    height: 10rem; /* 160px */
  }
  
  .product-image {
    height: 10rem; /* 160px */
  }
}
```

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–∫—Å–∏** –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö** —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏** –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à** –µ—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
4. **–°–æ–æ–±—â–∞–π—Ç–µ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö** —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

---

**üí° –ü–æ–º–Ω–∏—Ç–µ**: –ü—Ä–æ–∫—Å–∏ API –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é —Ä–∞–±–æ—Ç—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –≤–∫–ª—é—á–∞—è –º–æ–±–∏–ª—å–Ω—ã–µ!
