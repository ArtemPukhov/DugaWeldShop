# üöÄ –î–µ–ø–ª–æ–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –Ω–∞ —Å—Ç–µ–Ω–¥

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **403 Forbidden –æ—à–∏–±–∫–∞**
**–ü—Ä–æ–±–ª–µ–º–∞:** SecurityConfig –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª POST –∑–∞–ø—Ä–æ—Å—ã –∫ `/auth/**`
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è POST –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ auth endpoints

### 2. **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –¥–ª—è —Å—Ç–µ–Ω–¥–∞
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CorsConfig

## üìã –§–∞–π–ª—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —Å—Ç–µ–Ω–¥–µ

### Backend (Spring Boot):

1. **`src/main/java/ru/dugaweld/www/config/SecurityConfig.java`**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ: `.requestMatchers(HttpMethod.POST, "/auth/**").permitAll()`
   - –î–æ–±–∞–≤–ª–µ–Ω–æ: `/users/**` –≤ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π

2. **`src/main/java/ru/dugaweld/www/config/CorsConfig.java`** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
   - –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS –¥–ª—è –≤—Å–µ—Ö origins
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö HTTP –º–µ—Ç–æ–¥–æ–≤
   - –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ credentials

3. **`src/main/java/ru/dugaweld/www/controllers/HealthController.java`** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
   - –¢–µ—Å—Ç–æ–≤—ã–µ endpoints –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã backend

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è

### 1. **–û–±–Ω–æ–≤–∏—Ç—å backend:**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ 141.105.71.70
cd /path/to/backend

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω)
pkill -f "spring-boot"

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
./mvnw clean compile
./mvnw spring-boot:run
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É backend:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health endpoint
curl http://141.105.71.70:8080/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å auth endpoint
curl -X POST http://141.105.71.70:8080/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test","password":"123456","firstName":"Test"}'
```

### 3. **–û–±–Ω–æ–≤–∏—Ç—å frontend (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
```bash
cd /path/to/frontend
npm run build
npm start
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å backend –Ω–∞–ø—Ä—è–º—É—é:**
```bash
# Health check
curl http://141.105.71.70:8080/health

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
# {"status":"UP","timestamp":"2025-10-17T...","message":"Backend is running"}
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏:**
```bash
# –ß–µ—Ä–µ–∑ Next.js –ø—Ä–æ–∫—Å–∏
curl -X POST http://141.105.71.70:3000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","password":"password123","firstName":"Test"}'
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
- –û—Ç–∫—Ä—ã—Ç—å `http://141.105.71.70:3000/register`
- –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network tab –≤ DevTools

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ 403 Forbidden:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend:**
   ```bash
   tail -f logs/application.log
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω:**
   ```bash
   netstat -tulpn | grep :8080
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å SecurityConfig:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `/auth/**` –∏ `/users/**` –≤ permitAll()
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ POST –∫ `/auth/**` —Ä–∞–∑—Ä–µ—à–µ–Ω

### –ï—Å–ª–∏ CORS –æ—à–∏–±–∫–∏:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å CorsConfig:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `setAllowedOriginPatterns(List.of("*"))`
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `setAllowedMethods` –≤–∫–ª—é—á–∞–µ—Ç POST

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä:**
   - –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Network
   - –ò—Å–∫–∞—Ç—å preflight OPTIONS –∑–∞–ø—Ä–æ—Å—ã

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

- ‚úÖ `POST /api/auth/register` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK
- ‚úÖ `POST /api/auth/login-user` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK  
- ‚úÖ `GET /api/users/me` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å JWT —Ç–æ–∫–µ–Ω–æ–º
- ‚úÖ –ù–µ—Ç CORS –æ—à–∏–±–æ–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ UI
- ‚úÖ –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ UI

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ü–æ—Ä—è–¥–æ–∫ –¥–µ–ø–ª–æ—è:** –°–Ω–∞—á–∞–ª–∞ backend, –ø–æ—Ç–æ–º frontend
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:** –í—Å–µ–≥–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ endpoints
4. **–û—Ç–∫–∞—Ç:** –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è –æ—Ç–∫–∞—Ç–∞ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network tab –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
